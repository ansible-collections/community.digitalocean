name: Unit tests
on:
  # pull_request:
  #   types: [opened, synchronize, reopened]
  push:
    # branches: [main]
    branches:
      - v2-pydo
  # schedule:
  #   - cron: "10 6 * * *"

jobs:
  units:
    # https://github.com/ansible-collections/news-for-maintainers/issues/28
    runs-on: ubuntu-20.04
    timeout-minutes: 30
    name: Units (â’¶${{ matrix.ansible }})
    strategy:
      fail-fast: false
      matrix:
        ansible:
          # - stable-2.12
          - stable-2.13
          # - stable-2.14
          # - devel

    steps:
      - name: Perform testing
        uses: ansible-community/ansible-test-gh-action@release/v1
        with:
          ansible-core-version: ${{ matrix.ansible }}
          origin-python-version: 3.9
          target-python-version: 3.9
          testing-type: units
          test-deps: >-
            ansible.netcommon:==4.1.0
            ansible.utils
            community.general:==6.0.1
          # docker-image: quay.io/ansible/default-test-container:7.4.0
